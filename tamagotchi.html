<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Tamagotchi üê£ | Solana</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 30px;
            padding: 30px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header h1 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 10px;
        }

        .wallet-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .connect-btn {
            background: white;
            color: #667eea;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .connect-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .wallet-connected {
            color: white;
            font-size: 0.9em;
        }

        .pet-display {
            background: linear-gradient(135deg, #e0e7ff 0%, #f3e8ff 100%);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            margin-bottom: 20px;
            min-height: 250px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .pet-sprite {
            font-size: 120px;
            animation: float 3s ease-in-out infinite;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .pet-sprite:hover {
            transform: scale(1.1);
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .pet-name {
            font-size: 1.5em;
            color: #667eea;
            margin-top: 15px;
            font-weight: bold;
        }

        .pet-level {
            font-size: 1em;
            color: #764ba2;
            margin-top: 5px;
        }

        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .stat-bar-container {
            background: #e0e0e0;
            border-radius: 10px;
            height: 20px;
            overflow: hidden;
        }

        .stat-bar {
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease, background 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7em;
            color: white;
            font-weight: bold;
        }

        .stat-bar.health { background: linear-gradient(90deg, #ff6b6b, #ee5a6f); }
        .stat-bar.hunger { background: linear-gradient(90deg, #ffa502, #ff6348); }
        .stat-bar.happiness { background: linear-gradient(90deg, #ffd32a, #ffb142); }
        .stat-bar.energy { background: linear-gradient(90deg, #48dbfb, #0abde3); }

        .actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .action-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 15px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .action-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .action-btn:active:not(:disabled) {
            transform: translateY(-1px);
        }

        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .info-panel {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9em;
        }

        .info-label {
            color: #666;
        }

        .info-value {
            font-weight: bold;
            color: #667eea;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transform: translateX(400px);
            transition: transform 0.3s;
            z-index: 1000;
        }

        .notification.show {
            transform: translateX(0);
        }

        .emotion {
            position: absolute;
            font-size: 30px;
            animation: emotionFloat 2s ease-out forwards;
            pointer-events: none;
        }

        @keyframes emotionFloat {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-100px) scale(1.5);
            }
        }

        .token-cost {
            font-size: 0.8em;
            opacity: 0.8;
            margin-top: 5px;
        }

        .evolution-notice {
            background: linear-gradient(135deg, #ffd32a 0%, #ffb142 100%);
            color: white;
            padding: 10px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            margin-bottom: 15px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .start-screen {
            text-align: center;
        }

        .start-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 20px 50px;
            border-radius: 25px;
            font-size: 1.3em;
            cursor: pointer;
            font-weight: bold;
            margin-top: 20px;
            transition: all 0.3s;
        }

        .start-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üê£ Crypto Tamagotchi</h1>
            <p style="color: #764ba2;">–ó–∞–±–æ—Ç—å—Å—è –æ –ø–∏—Ç–æ–º—Ü–µ, –ø–æ–ª—É—á–∞–π —Ç–æ–∫–µ–Ω—ã!</p>
        </div>

        <div class="wallet-section" id="walletSection">
            <button class="connect-btn" id="connectWallet" onclick="connectWallet()">
                üîó –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫
            </button>
            <div id="walletInfo" class="wallet-connected" style="display: none;"></div>
        </div>

        <div id="startScreen" class="start-screen">
            <div class="pet-display">
                <div style="font-size: 100px;">ü•ö</div>
                <p style="margin-top: 20px; color: #667eea; font-size: 1.2em;">
                    –ù–∞—á–Ω–∏ —Å–≤–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ!
                </p>
            </div>
            <button class="start-btn" onclick="startGame()">
                üéÆ –ó–∞–≤–µ—Å—Ç–∏ –ø–∏—Ç–æ–º—Ü–∞
            </button>
            <p style="text-align: center; margin-top: 15px; color: #666; font-size: 0.9em;">
                –°—Ç–æ–∏–º–æ—Å—Ç—å: 10 —Ç–æ–∫–µ–Ω–æ–≤
            </p>
        </div>

        <div id="gameScreen" style="display: none;">
            <div id="evolutionNotice"></div>

            <div class="pet-display" id="petDisplay">
                <div class="pet-sprite" id="petSprite" onclick="petClick()">üê£</div>
                <div class="pet-name" id="petName">–ü–∏—Ç–æ–º–µ—Ü</div>
                <div class="pet-level" id="petLevel">–£—Ä–æ–≤–µ–Ω—å 1 ‚Ä¢ –ú–ª–∞–¥–µ–Ω–µ—Ü</div>
            </div>

            <div class="stats">
                <div class="stat">
                    <div class="stat-label">‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ</div>
                    <div class="stat-bar-container">
                        <div class="stat-bar health" id="healthBar">100%</div>
                    </div>
                </div>
                <div class="stat">
                    <div class="stat-label">üçñ –ì–æ–ª–æ–¥</div>
                    <div class="stat-bar-container">
                        <div class="stat-bar hunger" id="hungerBar">100%</div>
                    </div>
                </div>
                <div class="stat">
                    <div class="stat-label">üòä –°—á–∞—Å—Ç—å–µ</div>
                    <div class="stat-bar-container">
                        <div class="stat-bar happiness" id="happinessBar">100%</div>
                    </div>
                </div>
                <div class="stat">
                    <div class="stat-label">‚ö° –≠–Ω–µ—Ä–≥–∏—è</div>
                    <div class="stat-bar-container">
                        <div class="stat-bar energy" id="energyBar">100%</div>
                    </div>
                </div>
            </div>

            <div class="actions">
                <button class="action-btn" onclick="feedPet()">
                    üçñ –ö–æ—Ä–º–∏—Ç—å
                    <div class="token-cost">5 —Ç–æ–∫–µ–Ω–æ–≤</div>
                </button>
                <button class="action-btn" onclick="playWithPet()">
                    üéÆ –ò–≥—Ä–∞—Ç—å
                    <div class="token-cost">3 —Ç–æ–∫–µ–Ω–∞</div>
                </button>
                <button class="action-btn" onclick="healPet()">
                    üíä –õ–µ—á–∏—Ç—å
                    <div class="token-cost">8 —Ç–æ–∫–µ–Ω–æ–≤</div>
                </button>
                <button class="action-btn" onclick="restPet()">
                    üò¥ –°–ø–∞—Ç—å
                    <div class="token-cost">2 —Ç–æ–∫–µ–Ω–∞</div>
                </button>
            </div>

            <div class="info-panel">
                <div class="info-row">
                    <span class="info-label">ü™ô –ë–∞–ª–∞–Ω—Å —Ç–æ–∫–µ–Ω–æ–≤:</span>
                    <span class="info-value" id="tokenBalance">1000</span>
                </div>
                <div class="info-row">
                    <span class="info-label">‚≠ê –û–ø—ã—Ç:</span>
                    <span class="info-value" id="experience">0 / 100</span>
                </div>
                <div class="info-row">
                    <span class="info-label">‚è∞ –í–æ–∑—Ä–∞—Å—Ç:</span>
                    <span class="info-value" id="age">0 –¥–Ω–µ–π</span>
                </div>
                <div class="info-row">
                    <span class="info-label">üéØ –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ:</span>
                    <span class="info-value" id="earnedTokens">0</span>
                </div>
            </div>
        </div>
    </div>

    <div class="notification" id="notification"></div>

    <script>
        // –ò–≥—Ä–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        let gameState = {
            petName: "–ü–∏—Ç–æ–º–µ—Ü",
            level: 1,
            stage: 0, // 0: —è–π—Ü–æ, 1: –º–ª–∞–¥–µ–Ω–µ—Ü, 2: –ø–æ–¥—Ä–æ—Å—Ç–æ–∫, 3: –≤–∑—Ä–æ—Å–ª—ã–π
            health: 100,
            hunger: 100,
            happiness: 100,
            energy: 100,
            experience: 0,
            age: 0,
            tokens: 1000,
            earnedTokens: 0,
            walletConnected: false,
            lastUpdate: Date.now()
        };

        // –≠–≤–æ–ª—é—Ü–∏–æ–Ω–Ω—ã–µ —Å—Ç–∞–¥–∏–∏
        const stages = [
            { name: "–Ø–π—Ü–æ", sprite: "ü•ö", expRequired: 0 },
            { name: "–ú–ª–∞–¥–µ–Ω–µ—Ü", sprite: "üê£", expRequired: 0 },
            { name: "–ü–æ–¥—Ä–æ—Å—Ç–æ–∫", sprite: "üê•", expRequired: 100 },
            { name: "–í–∑—Ä–æ—Å–ª—ã–π", sprite: "üêì", expRequired: 300 },
            { name: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π", sprite: "ü¶ú", expRequired: 600 }
        ];

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
        function loadGame() {
            const saved = localStorage.getItem('cryptoTamagotchi');
            if (saved) {
                const loaded = JSON.parse(saved);
                gameState = { ...gameState, ...loaded };
                
                // –û–±–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞ –≤—Ä–µ–º—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è
                const timePassed = Math.floor((Date.now() - gameState.lastUpdate) / 1000);
                updateStatsOverTime(timePassed);
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–≥—Ä—ã
        function saveGame() {
            gameState.lastUpdate = Date.now();
            localStorage.setItem('cryptoTamagotchi', JSON.stringify(gameState));
        }

        // –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã
        function startGame() {
            if (gameState.tokens < 10) {
                showNotification("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–∫–µ–Ω–æ–≤!");
                return;
            }
            
            gameState.tokens -= 10;
            gameState.stage = 1;
            
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('gameScreen').style.display = 'block';
            
            updateDisplay();
            startGameLoop();
            showNotification("üéâ –ü–∏—Ç–æ–º–µ—Ü —Ä–æ–¥–∏–ª—Å—è! –ó–∞–±–æ—Ç—å—Å—è –æ –Ω–µ–º!");
            saveGame();
        }

        // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞
        async function connectWallet() {
            try {
                if (window.solana && window.solana.isPhantom) {
                    const response = await window.solana.connect();
                    const publicKey = response.publicKey.toString();
                    
                    gameState.walletConnected = true;
                    document.getElementById('connectWallet').style.display = 'none';
                    document.getElementById('walletInfo').style.display = 'block';
                    document.getElementById('walletInfo').innerHTML = `
                        ‚úÖ ${publicKey.slice(0, 4)}...${publicKey.slice(-4)}
                    `;
                    
                    showNotification("‚úÖ –ö–æ—à–µ–ª–µ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω!");
                    saveGame();
                } else {
                    showNotification("‚ùå –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Phantom –∫–æ—à–µ–ª–µ–∫!");
                    window.open('https://phantom.app/', '_blank');
                }
            } catch (err) {
                showNotification("‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞");
                console.error(err);
            }
        }

        // –î–µ–π—Å—Ç–≤–∏—è —Å –ø–∏—Ç–æ–º—Ü–µ–º
        function feedPet() {
            if (gameState.tokens < 5) {
                showNotification("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–∫–µ–Ω–æ–≤!");
                return;
            }
            
            gameState.tokens -= 5;
            gameState.hunger = Math.min(100, gameState.hunger + 30);
            gameState.health = Math.min(100, gameState.health + 5);
            gameState.experience += 5;
            
            showEmotion("üçñ");
            showNotification("üòã –ü–∏—Ç–æ–º–µ—Ü –ø–æ–∫–æ—Ä–º–ª–µ–Ω!");
            earnReward(2);
            updateDisplay();
            checkEvolution();
            saveGame();
        }

        function playWithPet() {
            if (gameState.tokens < 3) {
                showNotification("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–∫–µ–Ω–æ–≤!");
                return;
            }
            
            if (gameState.energy < 20) {
                showNotification("üò¥ –ü–∏—Ç–æ–º–µ—Ü —É—Å—Ç–∞–ª! –î–∞–π—Ç–µ –µ–º—É –æ—Ç–¥–æ—Ö–Ω—É—Ç—å.");
                return;
            }
            
            gameState.tokens -= 3;
            gameState.happiness = Math.min(100, gameState.happiness + 25);
            gameState.energy = Math.max(0, gameState.energy - 15);
            gameState.experience += 8;
            
            showEmotion("üéÆ");
            showNotification("üéâ –ü–∏—Ç–æ–º–µ—Ü –∏–≥—Ä–∞–µ—Ç –∏ —Ä–∞–¥—É–µ—Ç—Å—è!");
            earnReward(3);
            updateDisplay();
            checkEvolution();
            saveGame();
        }

        function healPet() {
            if (gameState.tokens < 8) {
                showNotification("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–∫–µ–Ω–æ–≤!");
                return;
            }
            
            if (gameState.health >= 90) {
                showNotification("üíö –ü–∏—Ç–æ–º–µ—Ü –∑–¥–æ—Ä–æ–≤!");
                return;
            }
            
            gameState.tokens -= 8;
            gameState.health = 100;
            gameState.experience += 3;
            
            showEmotion("üíä");
            showNotification("üíö –ü–∏—Ç–æ–º–µ—Ü –≤—ã–ª–µ—á–µ–Ω!");
            earnReward(1);
            updateDisplay();
            saveGame();
        }

        function restPet() {
            if (gameState.tokens < 2) {
                showNotification("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–∫–µ–Ω–æ–≤!");
                return;
            }
            
            gameState.tokens -= 2;
            gameState.energy = Math.min(100, gameState.energy + 40);
            gameState.health = Math.min(100, gameState.health + 10);
            gameState.experience += 3;
            
            showEmotion("üò¥");
            showNotification("üí§ –ü–∏—Ç–æ–º–µ—Ü –æ—Ç–¥—ã—Ö–∞–µ—Ç...");
            earnReward(2);
            updateDisplay();
            saveGame();
        }

        // –ö–ª–∏–∫ –ø–æ –ø–∏—Ç–æ–º—Ü—É
        function petClick() {
            const sprite = document.getElementById('petSprite');
            sprite.style.animation = 'none';
            setTimeout(() => {
                sprite.style.animation = 'float 3s ease-in-out infinite';
            }, 10);
            
            showEmotion("‚ù§Ô∏è");
            gameState.happiness = Math.min(100, gameState.happiness + 2);
            gameState.experience += 1;
            updateDisplay();
        }

        // –ù–∞–≥—Ä–∞–¥–∞ —Ç–æ–∫–µ–Ω–∞–º–∏
        function earnReward(amount) {
            const bonus = Math.floor(Math.random() * amount + amount);
            gameState.tokens += bonus;
            gameState.earnedTokens += bonus;
            showNotification(`üéÅ +${bonus} —Ç–æ–∫–µ–Ω–æ–≤!`);
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç–≤–æ–ª—é—Ü–∏–∏
        function checkEvolution() {
            const currentStage = gameState.stage;
            
            for (let i = stages.length - 1; i >= 0; i--) {
                if (gameState.experience >= stages[i].expRequired && i > currentStage) {
                    gameState.stage = i;
                    gameState.level++;
                    
                    showNotification(`üéâ –≠–í–û–õ–Æ–¶–ò–Ø! –¢–µ–ø–µ—Ä—å: ${stages[i].name}!`);
                    
                    const notice = document.getElementById('evolutionNotice');
                    notice.innerHTML = `<div class="evolution-notice">üåü –≠–≤–æ–ª—é—Ü–∏—è! ${stages[i].name} üåü</div>`;
                    
                    setTimeout(() => {
                        notice.innerHTML = '';
                    }, 5000);
                    
                    // –ë–æ–Ω—É—Å –∑–∞ —ç–≤–æ–ª—é—Ü–∏—é
                    const bonus = 50 * gameState.level;
                    gameState.tokens += bonus;
                    showNotification(`üéÅ –ë–æ–Ω—É—Å –∑–∞ —ç–≤–æ–ª—é—Ü–∏—é: ${bonus} —Ç–æ–∫–µ–Ω–æ–≤!`);
                    
                    break;
                }
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–æ–≤ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º
        function updateStatsOverTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            
            if (minutes > 0) {
                gameState.hunger = Math.max(0, gameState.hunger - minutes * 0.5);
                gameState.happiness = Math.max(0, gameState.happiness - minutes * 0.3);
                gameState.energy = Math.max(0, gameState.energy - minutes * 0.2);
                
                // –ó–¥–æ—Ä–æ–≤—å–µ –ø–∞–¥–∞–µ—Ç –µ—Å–ª–∏ –¥—Ä—É–≥–∏–µ —Å—Ç–∞—Ç—ã –Ω–∏–∑–∫–∏–µ
                if (gameState.hunger < 30 || gameState.happiness < 30) {
                    gameState.health = Math.max(0, gameState.health - minutes * 0.4);
                }
            }
        }

        // –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
        function startGameLoop() {
            setInterval(() => {
                // –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–æ–≤
                gameState.hunger = Math.max(0, gameState.hunger - 0.1);
                gameState.happiness = Math.max(0, gameState.happiness - 0.05);
                gameState.energy = Math.max(0, gameState.energy - 0.03);
                
                // –ó–¥–æ—Ä–æ–≤—å–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥—Ä—É–≥–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
                if (gameState.hunger < 30 || gameState.happiness < 30) {
                    gameState.health = Math.max(0, gameState.health - 0.08);
                }
                
                updateDisplay();
                
                // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
                if (gameState.hunger < 20) {
                    showNotification("üçñ –ü–∏—Ç–æ–º–µ—Ü –≥–æ–ª–æ–¥–µ–Ω!");
                }
                if (gameState.happiness < 20) {
                    showNotification("üò¢ –ü–∏—Ç–æ–º—Ü—É —Å–∫—É—á–Ω–æ!");
                }
                if (gameState.health < 30) {
                    showNotification("üíî –ü–∏—Ç–æ–º–µ—Ü –Ω–µ–∑–¥–æ—Ä–æ–≤!");
                }
                
                saveGame();
            }, 3000); // –ö–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
            
            // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤–æ–∑—Ä–∞—Å—Ç–∞
            setInterval(() => {
                gameState.age++;
                updateDisplay();
                saveGame();
            }, 60000); // –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É = 1 –¥–µ–Ω—å
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
        function updateDisplay() {
            const stage = stages[gameState.stage];
            
            document.getElementById('petSprite').textContent = stage.sprite;
            document.getElementById('petName').textContent = gameState.petName;
            document.getElementById('petLevel').textContent = `–£—Ä–æ–≤–µ–Ω—å ${gameState.level} ‚Ä¢ ${stage.name}`;
            
            updateStatBar('healthBar', gameState.health);
            updateStatBar('hungerBar', gameState.hunger);
            updateStatBar('happinessBar', gameState.happiness);
            updateStatBar('energyBar', gameState.energy);
            
            document.getElementById('tokenBalance').textContent = Math.floor(gameState.tokens);
            
            const nextStage = stages[gameState.stage + 1];
            const expRequired = nextStage ? nextStage.expRequired : "MAX";
            document.getElementById('experience').textContent = 
                expRequired === "MAX" ? `${gameState.experience} (MAX)` : `${gameState.experience} / ${expRequired}`;
            
            document.getElementById('age').textContent = `${gameState.age} –¥–Ω–µ–π`;
            document.getElementById('earnedTokens').textContent = gameState.earnedTokens;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–±–∞—Ä–∞
        function updateStatBar(id, value) {
            const bar = document.getElementById(id);
            bar.style.width = value + '%';
            bar.textContent = Math.floor(value) + '%';
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —ç–º–æ—Ü–∏—é
        function showEmotion(emoji) {
            const emotion = document.createElement('div');
            emotion.className = 'emotion';
            emotion.textContent = emoji;
            
            const petDisplay = document.getElementById('petDisplay');
            const rect = petDisplay.getBoundingClientRect();
            
            emotion.style.left = (rect.width / 2) + 'px';
            emotion.style.top = '50%';
            
            petDisplay.appendChild(emotion);
            
            setTimeout(() => {
                emotion.remove();
            }, 2000);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        window.addEventListener('load', () => {
            loadGame();
            
            if (gameState.stage > 0) {
                document.getElementById('startScreen').style.display = 'none';
                document.getElementById('gameScreen').style.display = 'block';
                updateDisplay();
                startGameLoop();
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            if (window.solana && window.solana.isPhantom && window.solana.isConnected) {
                window.solana.connect({ onlyIfTrusted: true }).then(response => {
                    const publicKey = response.publicKey.toString();
                    gameState.walletConnected = true;
                    document.getElementById('connectWallet').style.display = 'none';
                    document.getElementById('walletInfo').style.display = 'block';
                    document.getElementById('walletInfo').innerHTML = `
                        ‚úÖ ${publicKey.slice(0, 4)}...${publicKey.slice(-4)}
                    `;
                }).catch(() => {
                    // –ö–æ—à–µ–ª–µ–∫ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
                });
            }
        });

        // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
        window.addEventListener('beforeunload', () => {
            saveGame();
        });
    </script>
</body>
</html>

