<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Tamagotchi üê£ | Solana Devnet V2</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 30px;
            padding: 30px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header h1 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 10px;
        }

        .devnet-badge {
            background: linear-gradient(135deg, #ff6b6b, #ee5a6f);
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.8em;
            display: inline-block;
            margin-top: 5px;
            font-weight: bold;
        }

        .wallet-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .connect-btn {
            background: white;
            color: #667eea;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .connect-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .wallet-connected {
            color: white;
            font-size: 0.9em;
        }

        .pet-display {
            background: linear-gradient(135deg, #e0e7ff 0%, #f3e8ff 100%);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            margin-bottom: 20px;
            min-height: 250px;
        }

        .pet-sprite {
            font-size: 120px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .pet-name {
            font-size: 1.5em;
            color: #667eea;
            margin-top: 15px;
            font-weight: bold;
        }

        .pet-level {
            font-size: 1em;
            color: #764ba2;
            margin-top: 5px;
        }

        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 8px;
        }

        .stat-bar-container {
            background: #e0e0e0;
            border-radius: 10px;
            height: 20px;
            overflow: hidden;
        }

        .stat-bar {
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7em;
            color: white;
            font-weight: bold;
        }

        .stat-bar.health { background: linear-gradient(90deg, #ff6b6b, #ee5a6f); }
        .stat-bar.hunger { background: linear-gradient(90deg, #ffa502, #ff6348); }
        .stat-bar.happiness { background: linear-gradient(90deg, #ffd32a, #ffb142); }
        .stat-bar.energy { background: linear-gradient(90deg, #48dbfb, #0abde3); }

        .actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .action-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 15px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .action-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .info-panel {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9em;
        }

        .info-label {
            color: #666;
        }

        .info-value {
            font-weight: bold;
            color: #667eea;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transform: translateX(400px);
            transition: transform 0.3s;
            z-index: 1000;
            max-width: 300px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .start-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 20px 50px;
            border-radius: 25px;
            font-size: 1.3em;
            cursor: pointer;
            font-weight: bold;
            margin-top: 20px;
            transition: all 0.3s;
        }

        .start-btn:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .start-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .error {
            background: #ffebee;
            border: 2px solid #ef5350;
            color: #c62828;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üê£ Crypto Tamagotchi</h1>
            <div class="devnet-badge">üß™ DEVNET V2 - SIMPLE</div>
            <p style="color: #764ba2; margin-top: 10px;">Simplified Web3.js only!</p>
            <p style="color: #4caf50; margin-top: 5px; font-size: 0.9em;">‚ú® Reading from blockchain!</p>
        </div>

        <div class="wallet-section" id="walletSection">
            <button class="connect-btn" id="connectWalletBtn" onclick="connectWallet()">
                üîó –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫ (Devnet)
            </button>
            <div id="walletInfo" class="wallet-connected" style="display: none;">
                <div id="walletAddress"></div>
                <button class="connect-btn" onclick="disconnectWallet()" style="margin-top: 10px; background: #ff6b6b;">
                    üîå –û—Ç–∫–ª—é—á–∏—Ç—å
                </button>
            </div>
        </div>

        <div id="startScreen" class="start-screen" style="text-align: center;">
            <div class="pet-display">
                <div style="font-size: 100px;">ü•ö</div>
                <p style="margin-top: 20px; color: #667eea; font-size: 1.2em;">
                    –ü–æ–¥–∫–ª—é—á–∏ –∫–æ—à–µ–ª–µ–∫ —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –ø–∏—Ç–æ–º—Ü–∞!
                </p>
            </div>
            <p style="text-align: center; margin-top: 15px; color: #666; font-size: 0.9em;">
                ‚ÑπÔ∏è Simplified version - —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ blockchain
            </p>
        </div>

        <div id="gameScreen" style="display: none;">
            <div class="pet-display" id="petDisplay">
                <div class="pet-sprite" id="petSprite">üê£</div>
                <div class="pet-name" id="petName">–ü–∏—Ç–æ–º–µ—Ü</div>
                <div class="pet-level" id="petLevel">–£—Ä–æ–≤–µ–Ω—å 1</div>
            </div>

            <div class="stats">
                <div class="stat">
                    <div class="stat-label">‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ</div>
                    <div class="stat-bar-container">
                        <div class="stat-bar health" id="healthBar">100%</div>
                    </div>
                </div>
                <div class="stat">
                    <div class="stat-label">üçñ –ì–æ–ª–æ–¥</div>
                    <div class="stat-bar-container">
                        <div class="stat-bar hunger" id="hungerBar">100%</div>
                    </div>
                </div>
                <div class="stat">
                    <div class="stat-label">üòä –°—á–∞—Å—Ç—å–µ</div>
                    <div class="stat-bar-container">
                        <div class="stat-bar happiness" id="happinessBar">100%</div>
                    </div>
                </div>
                <div class="stat">
                    <div class="stat-label">‚ö° –≠–Ω–µ—Ä–≥–∏—è</div>
                    <div class="stat-bar-container">
                        <div class="stat-bar energy" id="energyBar">100%</div>
                    </div>
                </div>
            </div>

            <div class="info-panel" id="petInfoPanel" style="background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%); border: 2px solid #667eea;">
                <div style="text-align: center; font-weight: bold; color: #667eea; margin-bottom: 10px; font-size: 1.1em;">
                    üê£ –ü–∏—Ç–æ–º–µ—Ü –∏–∑ Blockchain
                </div>
                <div class="info-row">
                    <span class="info-label">üÜî Pet ID:</span>
                    <span class="info-value" id="petId">#????</span>
                </div>
                <div class="info-row">
                    <span class="info-label">üß¨ DNA:</span>
                    <span class="info-value" id="petDna">...</span>
                </div>
                <div class="info-row">
                    <span class="info-label">‚ú® –†–µ–¥–∫–æ—Å—Ç—å:</span>
                    <span class="info-value" id="petRarity">‚≠ê</span>
                </div>
                <div class="info-row">
                    <span class="info-label">üé® –í–∏–¥:</span>
                    <span class="info-value" id="petSpecies">...</span>
                </div>
                <div class="info-row">
                    <span class="info-label">üìä –£—Ä–æ–≤–µ–Ω—å:</span>
                    <span class="info-value" id="petLevelInfo">1</span>
                </div>
                <div class="info-row">
                    <span class="info-label">‚≠ê –û–ø—ã—Ç:</span>
                    <span class="info-value" id="petExp">0</span>
                </div>
                <div class="info-row">
                    <span class="info-label">‚è∞ –í–æ–∑—Ä–∞—Å—Ç:</span>
                    <span class="info-value" id="petAge">0</span>
                </div>
                <div class="info-row">
                    <span class="info-label">üí´ –ñ–∏–≤:</span>
                    <span class="info-value" id="petAlive">‚úÖ</span>
                </div>
                <button class="action-btn" onclick="refreshPet()" style="width: 100%; margin-top: 10px;">
                    üîÑ –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
                </button>
            </div>

            <div id="explorerLink" style="text-align: center; margin-top: 10px;">
                <a href="#" id="petAccountLink" target="_blank" style="color: #667eea; text-decoration: none; font-size: 0.9em;">
                    üîç –°–º–æ—Ç—Ä–µ—Ç—å –≤ Explorer
                </a>
            </div>
        </div>
    </div>

    <div class="notification" id="notification"></div>

    <!-- Solana Web3.js ONLY -->
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.js"></script>

    <script>
        // üéØ –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
        const PROGRAM_ID = 'uY5hZR2uYzkquJDuDkFBj29tfzZRPE96BBTHYGaYnwX';
        const RPC_URL = 'https://api.devnet.solana.com';
        
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let connection;
        let wallet = null;
        let petPubkey = null;

        // –†–µ–¥–∫–æ—Å—Ç–∏
        const RARITY_NAMES = ['Common', 'Uncommon', 'Rare', 'Epic', 'Legendary'];
        const RARITY_STARS = ['‚≠ê', '‚≠ê‚≠ê', '‚≠ê‚≠ê‚≠ê', '‚≠ê‚≠ê‚≠ê‚≠ê', '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê'];
        
        // –í–∏–¥—ã –ø–∏—Ç–æ–º—Ü–µ–≤
        const SPECIES_EMOJI = ['üê£', 'üê±', 'üê∂', 'üêâ', 'ü¶ä', 'üêª', 'üê∞', 'üêº', 'ü¶ù', 'üêπ'];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        async function init() {
            connection = new window.solanaWeb3.Connection(RPC_URL, 'confirmed');
            console.log('‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ Solana Devnet');
        }

        // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞
        async function connectWallet() {
            try {
                if (!window.solana || !window.solana.isPhantom) {
                    showNotification("‚ùå –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Phantom –∫–æ—à–µ–ª–µ–∫!");
                    window.open('https://phantom.app/', '_blank');
                    return;
                }

                const resp = await window.solana.connect();
                wallet = window.solana;
                
                const publicKey = resp.publicKey.toString();
                
                document.getElementById('connectWalletBtn').style.display = 'none';
                document.getElementById('walletInfo').style.display = 'block';
                document.getElementById('walletAddress').innerHTML = `‚úÖ ${publicKey.slice(0, 4)}...${publicKey.slice(-4)}`;
                
                showNotification("‚úÖ –ö–æ—à–µ–ª–µ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω!");
                
                // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –µ—Å—Ç—å –ª–∏ —É–∂–µ –ø–∏—Ç–æ–º–µ—Ü
                await checkExistingPet();
                
            } catch (err) {
                showNotification("‚ùå –û—à–∏–±–∫–∞: " + err.message);
                console.error(err);
            }
        }

        // –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞
        async function disconnectWallet() {
            try {
                if (wallet) {
                    await wallet.disconnect();
                }
                wallet = null;
                petPubkey = null;
                
                document.getElementById('connectWalletBtn').style.display = 'block';
                document.getElementById('walletInfo').style.display = 'none';
                document.getElementById('gameScreen').style.display = 'none';
                document.getElementById('startScreen').style.display = 'block';
                
                showNotification("üëã –ö–æ—à–µ–ª–µ–∫ –æ—Ç–∫–ª—é—á–µ–Ω!");
            } catch (err) {
                console.error(err);
            }
        }

        // –ü–æ–ª—É—á–∏—Ç—å PDA –ø–∏—Ç–æ–º—Ü–∞
        async function getPetPda(walletPubkey) {
            const programId = new window.solanaWeb3.PublicKey(PROGRAM_ID);
            const seeds = [
                Buffer.from("pet"),
                walletPubkey.toBuffer()
            ];
            
            const [pda] = await window.solanaWeb3.PublicKey.findProgramAddress(
                seeds,
                programId
            );
            
            return pda;
        }

        // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–∏—Ç–æ–º—Ü–∞
        async function checkExistingPet() {
            try {
                const petPda = await getPetPda(wallet.publicKey);
                petPubkey = petPda;
                
                console.log('üîç –ò—â—É –ø–∏—Ç–æ–º—Ü–∞ –ø–æ –∞–¥—Ä–µ—Å—É:', petPda.toString());
                
                const accountInfo = await connection.getAccountInfo(petPda);
                
                if (accountInfo && accountInfo.data) {
                    console.log('‚úÖ –ü–∏—Ç–æ–º–µ—Ü –Ω–∞–π–¥–µ–Ω!');
                    const pet = deserializePet(accountInfo.data);
                    
                    document.getElementById('startScreen').style.display = 'none';
                    document.getElementById('gameScreen').style.display = 'block';
                    updateDisplay(pet);
                    
                    // –î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ Explorer
                    document.getElementById('petAccountLink').href = 
                        `https://explorer.solana.com/address/${petPda.toString()}?cluster=devnet`;
                    
                    showNotification("üéâ –í–∞—à –ø–∏—Ç–æ–º–µ—Ü –Ω–∞–π–¥–µ–Ω!");
                } else {
                    console.log('‚ÑπÔ∏è –ü–∏—Ç–æ–º–µ—Ü –Ω–µ –Ω–∞–π–¥–µ–Ω');
                    showNotification("‚ÑπÔ∏è –ü–∏—Ç–æ–º–µ—Ü –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ –≤ Solana Playground!");
                }
            } catch (err) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∏—Ç–æ–º—Ü–∞:', err);
                showNotification("‚ÑπÔ∏è –ü–∏—Ç–æ–º–µ—Ü –Ω–µ –Ω–∞–π–¥–µ–Ω");
            }
        }

        // –î–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–∏—Ç–æ–º—Ü–∞ (Anchor layout)
        function deserializePet(data) {
            // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–≤—ã–µ 8 –±–∞–π—Ç (discriminator)
            let offset = 8;
            
            // owner: Pubkey (32 bytes)
            const owner = new window.solanaWeb3.PublicKey(data.slice(offset, offset + 32));
            offset += 32;
            
            // dna: u64 (8 bytes)
            const dna = readU64LE(data, offset);
            offset += 8;
            
            // petId: u32 (4 bytes)
            const petId = readU32LE(data, offset);
            offset += 4;
            
            // species: u8 (1 byte)
            const species = data[offset];
            offset += 1;
            
            // accessory: u8 (1 byte)
            const accessory = data[offset];
            offset += 1;
            
            // background: u8 (1 byte)
            const background = data[offset];
            offset += 1;
            
            // rarity: u8 (1 byte)
            const rarity = data[offset];
            offset += 1;
            
            // level: u8 (1 byte)
            const level = data[offset];
            offset += 1;
            
            // experience: u16 (2 bytes)
            const experience = readU16LE(data, offset);
            offset += 2;
            
            // health: u8 (1 byte)
            const health = data[offset];
            offset += 1;
            
            // hunger: u8 (1 byte)
            const hunger = data[offset];
            offset += 1;
            
            // happiness: u8 (1 byte)
            const happiness = data[offset];
            offset += 1;
            
            // energy: u8 (1 byte)
            const energy = data[offset];
            offset += 1;
            
            // age: u32 (4 bytes)
            const age = readU32LE(data, offset);
            offset += 4;
            
            // birthTime: i64 (8 bytes)
            const birthTime = readI64LE(data, offset);
            offset += 8;
            
            // lastActionTime: i64 (8 bytes)
            const lastActionTime = readI64LE(data, offset);
            offset += 8;
            
            // lastDecayTime: i64 (8 bytes)
            const lastDecayTime = readI64LE(data, offset);
            offset += 8;
            
            // actionsCount: u32 (4 bytes)
            const actionsCount = readU32LE(data, offset);
            offset += 4;
            
            // isAlive: bool (1 byte)
            const isAlive = data[offset] !== 0;
            offset += 1;
            
            // bump: u8 (1 byte)
            const bump = data[offset];
            
            return {
                owner,
                dna,
                petId,
                species,
                accessory,
                background,
                rarity,
                level,
                experience,
                health,
                hunger,
                happiness,
                energy,
                age,
                birthTime,
                lastActionTime,
                lastDecayTime,
                actionsCount,
                isAlive,
                bump
            };
        }

        // Helper functions –¥–ª—è —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
        function readU32LE(buffer, offset) {
            return buffer[offset] + 
                   (buffer[offset + 1] << 8) + 
                   (buffer[offset + 2] << 16) + 
                   (buffer[offset + 3] << 24);
        }

        function readU16LE(buffer, offset) {
            return buffer[offset] + (buffer[offset + 1] << 8);
        }

        function readU64LE(buffer, offset) {
            const low = readU32LE(buffer, offset);
            const high = readU32LE(buffer, offset + 4);
            return low + high * 4294967296; // 2^32
        }

        function readI64LE(buffer, offset) {
            return readU64LE(buffer, offset);
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
        function updateDisplay(pet) {
            console.log('üìä –î–∞–Ω–Ω—ã–µ –ø–∏—Ç–æ–º—Ü–∞:', pet);
            
            // –°–ø—Ä–∞–π—Ç
            const species = SPECIES_EMOJI[pet.species] || 'üê£';
            document.getElementById('petSprite').textContent = species;
            
            // –ò–º—è
            document.getElementById('petName').textContent = `–ü–∏—Ç–æ–º–µ—Ü #${pet.petId}`;
            document.getElementById('petLevel').textContent = `–£—Ä–æ–≤–µ–Ω—å ${pet.level}`;
            
            // –°—Ç–∞—Ç—ã
            updateStatBar('healthBar', pet.health);
            updateStatBar('hungerBar', pet.hunger);
            updateStatBar('happinessBar', pet.happiness);
            updateStatBar('energyBar', pet.energy);
            
            // –ò–Ω—Ñ–æ –ø–∞–Ω–µ–ª—å
            document.getElementById('petId').textContent = `#${pet.petId}`;
            document.getElementById('petDna').textContent = pet.dna.toString().slice(0, 10) + '...';
            
            const rarityName = RARITY_NAMES[pet.rarity] || 'Common';
            const rarityStars = RARITY_STARS[pet.rarity] || '‚≠ê';
            document.getElementById('petRarity').textContent = `${rarityName} ${rarityStars}`;
            
            document.getElementById('petSpecies').textContent = species;
            document.getElementById('petLevelInfo').textContent = pet.level;
            document.getElementById('petExp').textContent = pet.experience;
            document.getElementById('petAge').textContent = pet.age;
            document.getElementById('petAlive').textContent = pet.isAlive ? '‚úÖ –î–∞' : 'üíÄ –ù–µ—Ç';
        }

        function updateStatBar(id, value) {
            const bar = document.getElementById(id);
            bar.style.width = value + '%';
            bar.textContent = value + '%';
        }

        // –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–∏—Ç–æ–º—Ü–∞
        async function refreshPet() {
            if (!wallet || !petPubkey) return;
            
            try {
                showNotification("üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö...");
                
                const accountInfo = await connection.getAccountInfo(petPubkey);
                
                if (accountInfo && accountInfo.data) {
                    const pet = deserializePet(accountInfo.data);
                    updateDisplay(pet);
                    showNotification("‚úÖ –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã!");
                } else {
                    showNotification("‚ùå –ü–∏—Ç–æ–º–µ—Ü –Ω–µ –Ω–∞–π–¥–µ–Ω!");
                }
            } catch (err) {
                console.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:', err);
                showNotification("‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: " + err.message);
            }
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.innerHTML = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', async () => {
            await init();
            
            // –ê–≤—Ç–æ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –µ—Å–ª–∏ —É–∂–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
            if (window.solana && window.solana.isPhantom) {
                try {
                    const resp = await window.solana.connect({ onlyIfTrusted: true });
                    if (resp) {
                        await connectWallet();
                    }
                } catch (e) {
                    console.log('–ê–≤—Ç–æ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ —É–¥–∞–ª–æ—Å—å');
                }
            }
        });
    </script>
</body>
</html>


