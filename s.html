<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎮 Join Solana Tamagotchi - Get 1,000 TAMA Bonus!</title>
    <meta property="og:url" content="https://tr1h.github.io/solana-tamagotchi/s.html?v=15">
    <meta property="og:title" content="🎮 Join Solana Tamagotchi - Get 1,000 TAMA Bonus!">
    <meta property="og:description" content="🐾 Play-to-Earn NFT pet game on Solana! Grow unique pets, earn TAMA tokens, and compete on leaderboard. Get 1,000 TAMA bonus when you join!">
    <meta property="og:image" content="https://tr1h.github.io/solana-tamagotchi/assets/referral-preview.png?v=16">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta name="twitter:card" content="summary_large_image">
    <style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}.container{max-width:600px;text-align:center;background:rgba(255,255,255,0.1);backdrop-filter:blur(10px);border-radius:20px;padding:40px;box-shadow:0 20px 40px rgba(0,0,0,0.3)}.logo{font-size:4rem;margin-bottom:20px;animation:bounce 2s infinite}@keyframes bounce{0%,20%,50%,80%,100%{transform:translateY(0)}40%{transform:translateY(-10px)}60%{transform:translateY(-5px)}}h1{font-size:2.5rem;margin-bottom:20px;text-shadow:0 2px 10px rgba(0,0,0,0.3)}.subtitle{font-size:1.2rem;margin-bottom:30px;opacity:0.9;line-height:1.6}.bonus-box{background:linear-gradient(135deg,#4ade80,#22c55e);color:white;padding:25px;border-radius:15px;margin:30px 0;box-shadow:0 10px 20px rgba(74,222,128,0.3)}.bonus-title{font-size:1.5rem;font-weight:bold;margin-bottom:10px}.bonus-amount{font-size:3rem;font-weight:bold;text-shadow:0 2px 10px rgba(0,0,0,0.3)}.cta-button{display:inline-block;background:linear-gradient(135deg,#667eea,#764ba2);color:white;text-decoration:none;padding:20px 40px;border-radius:50px;font-size:1.3rem;font-weight:bold;margin:30px 0;box-shadow:0 10px 20px rgba(102,126,234,0.4);transition:all 0.3s ease}.cta-button:hover{transform:translateY(-3px);box-shadow:0 15px 30px rgba(102,126,234,0.6)}.loading{font-size:1.2rem;opacity:0.8}</style>
</head>
<body>
    <div class="container">
        <div class="logo">🐾</div>
        <h1>Solana Tamagotchi</h1>
        <p class="subtitle">🎮 Play-to-Earn NFT pet game on Solana!<br>Grow, train and earn with your digital pets.</p>
        <div class="bonus-box">
            <div class="bonus-title">🎁 JOIN BONUS</div>
            <div class="bonus-amount">1,000 TAMA</div>
            <p>Get instant bonus when you join through referral link!</p>
        </div>
        <div class="loading" id="loading">🔄 Redirecting...</div>
        <a href="#" id="telegram-link" class="cta-button" style="display:none;">🤖 Start Playing Now</a>
    </div>
    <script>
        const urlParams=new URLSearchParams(window.location.search);
        const refCode=urlParams.get('ref');
        if(refCode){
            // Track click - send to Supabase analytics
            try{
                fetch('https://zfrazyupameidxpjihrh.supabase.co/rest/v1/referral_clicks',{
                    method:'POST',
                    headers:{
                        'Content-Type':'application/json',
                        'apikey':'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpmcmF6eXVwYW1laWR4cGppaHJoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5Mzc1NTAsImV4cCI6MjA3NTUxMzU1MH0.1EkMDqCNJoAjcJDh3Dd3yPfus-JpdcwE--z2dhjh7wU'
                    },
                    body:JSON.stringify({
                        referral_code:refCode,
                        clicked_at:new Date().toISOString(),
                        user_agent:navigator.userAgent,
                        referrer_url:document.referrer
                    })
                }).catch(()=>{});
            }catch(e){}
            
            const link=document.getElementById('telegram-link');
            link.href=`https://t.me/solana_tamagotchi_v3_bot?start=ref${refCode}`;
            link.style.display='inline-block';
            document.getElementById('loading').style.display='none';
            
            setTimeout(()=>window.location.href=link.href,2000);
        }else{
            document.getElementById('loading').textContent='❌ Invalid referral link';
        }
    </script>
</body>
</html>
