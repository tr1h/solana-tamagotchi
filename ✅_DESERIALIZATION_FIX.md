# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ê –î–ï–°–ï–†–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–ò–¢–û–ú–¶–ê

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–∏—Ç–æ–º—Ü–∞ –æ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞–ª—Å—è –∫–∞–∫ **–º–µ—Ä—Ç–≤—ã–π**:
```
üíÄ Pet is alive: false
‚ù§Ô∏è Pet health: 0
```

–•–æ—Ç—è –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ –ø–∏—Ç–æ–º–µ—Ü —Å–æ–∑–¥–∞–µ—Ç—Å—è –∂–∏–≤—ã–º:
```rust
pet.health = 100;
pet.is_alive = true;
pet.lives = 3;
```

## üîç –ü—Ä–∏—á–∏–Ω–∞

**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ!**

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Pet –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ (programs/tamagotchi/src/lib.rs):
```rust
pub struct Pet {
    pub owner: Pubkey,              // 32 –±–∞–π—Ç–∞  ‚Üê –ß–∏—Ç–∞–ª–æ—Å—å
    pub mint: Pubkey,               // 32 –±–∞–π—Ç–∞  ‚Üê –ü–†–û–ü–£–°–ö–ê–õ–û–°–¨ ‚ùå
    pub nft_mint: Pubkey,           // 32 –±–∞–π—Ç–∞  ‚Üê –ü–†–û–ü–£–°–ö–ê–õ–û–°–¨ ‚ùå
    pub metadata: Pubkey,           // 32 –±–∞–π—Ç–∞  ‚Üê –ü–†–û–ü–£–°–ö–ê–õ–û–°–¨ ‚ùå
    pub dna: u64,                   // 8 –±–∞–π—Ç    ‚Üê –ß–∏—Ç–∞–ª–æ—Å—å –∏–∑ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –º–µ—Å—Ç–∞!
    pub pet_id: u32,                // 4 –±–∞–π—Ç–∞
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
    pub health: u8,                 // 1 –±–∞–π—Ç    ‚Üê –ß–∏—Ç–∞–ª–æ—Å—å –∏–∑ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –º–µ—Å—Ç–∞!
    // ...
    pub total_tokens_burned: u64,   // 8 –±–∞–π—Ç    ‚Üê –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫!
    pub actions_count: u32,         // 4 –±–∞–π—Ç–∞   ‚Üê –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫!
    pub is_alive: bool,             // 1 –±–∞–π—Ç
    pub lives: u8,                  // 1 –±–∞–π—Ç
    pub bump: u8,                   // 1 –±–∞–π—Ç
}
```

### –§—Ä–æ–Ω—Ç–µ–Ω–¥ –î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```javascript
function deserializePet(data) {
    let offset = 8;
    
    const owner = new PublicKey(data.slice(offset, offset + 32));
    offset += 32;
    
    // ‚ùå –°—Ä–∞–∑—É —á–∏—Ç–∞–µ–º dna, –ø—Ä–æ–ø—É—Å–∫–∞—è 3 Pubkey (96 –±–∞–π—Ç)!
    const dna = readU64LE(data, offset);
    
    // ‚ùå –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–¥–≤–∏–Ω—É—Ç—ã –Ω–∞ 96 –±–∞–π—Ç!
    // health —á–∏—Ç–∞–µ—Ç—Å—è –Ω–µ –∏–∑ —Ç–æ–≥–æ –º–µ—Å—Ç–∞
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –ø–æ–ª—è —á–∏—Ç–∞–ª–∏—Å—å –∏–∑ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –º–µ—Å—Ç, `health` —Å–æ–¥–µ—Ä–∂–∞–ª –º—É—Å–æ—Ä (—á–∞—Å—Ç—å –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—è).

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ Pubkey –ø–æ–ª—è:
```javascript
function deserializePet(data) {
    let offset = 8; // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º discriminator
    
    // ‚úÖ –ß–∏—Ç–∞–µ–º –í–°–ï 4 Pubkey
    const owner = new PublicKey(data.slice(offset, offset + 32));
    offset += 32;
    
    const mint = new PublicKey(data.slice(offset, offset + 32));
    offset += 32;
    
    const nftMint = new PublicKey(data.slice(offset, offset + 32));
    offset += 32;
    
    const metadata = new PublicKey(data.slice(offset, offset + 32));
    offset += 32;
    
    // ‚úÖ –¢–µ–ø–µ—Ä—å offset –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π!
    const dna = readU64LE(data, offset);
    offset += 8;
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
}
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –ø–æ–ª–µ–π –≤ –∫–æ–Ω—Ü–µ:

**–ë—ã–ª–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```javascript
const actionsCount = readU32LE(data, offset);     // ‚ùå
offset += 4;
const isAlive = data[offset] !== 0;
offset += 1;
const lives = data[offset] || 3;
offset += 1;
const totalTokensBurned = readU64LE(data, offset); // ‚ùå
```

**–°—Ç–∞–ª–æ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```javascript
const totalTokensBurned = readU64LE(data, offset); // ‚úÖ –°–Ω–∞—á–∞–ª–∞ u64
offset += 8;
const actionsCount = readU32LE(data, offset);      // ‚úÖ –ü–æ—Ç–æ–º u32
offset += 4;
const isAlive = data[offset] !== 0;
offset += 1;
const lives = data[offset] || 3;
offset += 1;
const bump = data[offset];                         // ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω bump
offset += 1;
```

## üìä –ö–∞—Ä—Ç–∞ –ø–∞–º—è—Ç–∏ (–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)

```
Offset | –†–∞–∑–º–µ—Ä | –ü–æ–ª–µ                | –ó–Ω–∞—á–µ–Ω–∏–µ
-------|--------|---------------------|----------
0      | 8      | discriminator       | (Anchor)
8      | 32     | owner               | Pubkey –≤–ª–∞–¥–µ–ª—å—Ü–∞
40     | 32     | mint                | Pubkey (unused)
72     | 32     | nft_mint            | Pubkey NFT
104    | 32     | metadata            | Pubkey –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
136    | 8      | dna                 | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
144    | 4      | pet_id              | ID –ø–∏—Ç–æ–º—Ü–∞
148    | 1      | species             | –í–∏–¥ (0-9)
149    | 1      | accessory           | –ê–∫—Å–µ—Å—Å—É–∞—Ä
150    | 1      | background          | –§–æ–Ω
151    | 1      | rarity              | –†–µ–¥–∫–æ—Å—Ç—å (0-4)
152    | 1      | level               | –£—Ä–æ–≤–µ–Ω—å
153    | 2      | experience          | –û–ø—ã—Ç
155    | 1      | health              | ‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ (0-100)
156    | 1      | hunger              | üçï –ì–æ–ª–æ–¥ (0-100)
157    | 1      | happiness           | üòä –°—á–∞—Å—Ç—å–µ (0-100)
158    | 1      | energy              | ‚ö° –≠–Ω–µ—Ä–≥–∏—è (0-100)
159    | 4      | age                 | –í–æ–∑—Ä–∞—Å—Ç (–¥–Ω–∏)
163    | 8      | birth_time          | –í—Ä–µ–º—è —Ä–æ–∂–¥–µ–Ω–∏—è
171    | 8      | last_action_time    | –ü–æ—Å–ª–µ–¥–Ω–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ
179    | 8      | last_decay_time     | –ü–æ—Å–ª–µ–¥–Ω–∏–π decay
187    | 8      | total_tokens_burned | –í—Å–µ–≥–æ —Å–æ–∂–∂–µ–Ω–æ TAMA
195    | 4      | actions_count       | –ö–æ–ª-–≤–æ –¥–µ–π—Å—Ç–≤–∏–π
199    | 1      | is_alive            | üíÄ –ñ–∏–≤ –ª–∏
200    | 1      | lives               | ‚ù§Ô∏è –ñ–∏–∑–Ω–∏ (0-3)
201    | 1      | bump                | PDA bump
-------|--------|---------------------|----------
–ò–¢–û–ì–û: 202 –±–∞–π—Ç–∞
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```javascript
Pet data: {
  health: 0,        // ‚ùå –ß–∏—Ç–∞–ª–æ—Å—å –∏–∑ offset 155 - 96 = 59 (–º—É—Å–æ—Ä!)
  isAlive: false,   // ‚ùå –ß–∏—Ç–∞–ª–æ—Å—å –∏–∑ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –º–µ—Å—Ç–∞
  lives: 0          // ‚ùå –ù–µ —á–∏—Ç–∞–ª–æ—Å—å
}
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```javascript
Pet data: {
  health: 100,      // ‚úÖ –ß–∏—Ç–∞–µ—Ç—Å—è –∏–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ offset 155
  isAlive: true,    // ‚úÖ –ß–∏—Ç–∞–µ—Ç—Å—è –∏–∑ offset 199
  lives: 3          // ‚úÖ –ß–∏—Ç–∞–µ—Ç—Å—è –∏–∑ offset 200
}
```

## üöÄ –î–µ–ø–ª–æ–π

**–ù–æ–≤—ã–π URL —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º:**  
https://crypto-tamagotchi-devnet-7mmmbp4q7-ivans-projects-4717924b.vercel.app

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫–æ—à–µ–ª—ë–∫ (–µ—Å–ª–∏ –ø–∏—Ç–æ–º–µ—Ü —É–∂–µ —Å–æ–∑–¥–∞–Ω, –æ–Ω –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12):
   ```
   ‚úÖ –ü–∏—Ç–æ–º–µ—Ü –Ω–∞–π–¥–µ–Ω!
   üíÄ Pet is alive: true    ‚Üê –¢–µ–ø–µ—Ä—å true!
   ‚ù§Ô∏è Pet health: 100       ‚Üê –¢–µ–ø–µ—Ä—å 100!
   ```

## üìù –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

1. `vercel_deploy/tamagotchi_devnet_v2_improved.html` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `deserializePet()`
2. `tamagotchi_devnet_v2_improved.html` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `deserializePet()`

## üõ†Ô∏è –ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å –≤ –±—É–¥—É—â–µ–º

### –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—è –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç:

1. **–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É Pet –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ:**
   ```rust
   pub struct Pet {
       // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
       pub new_field: u64,  // –Ω–æ–≤–æ–µ –ø–æ–ª–µ
   }
   ```

2. **–û–±–Ω–æ–≤–∏—Ç–µ –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ:**
   ```javascript
   const newField = readU64LE(data, offset);
   offset += 8;
   ```

3. **–í–ê–ñ–ù–û:** –ü–æ—Ä—è–¥–æ–∫ –ø–æ–ª–µ–π –¥–æ–ª–∂–µ–Ω —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å!

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
–°–æ–∑–¥–∞–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é IDL:
```bash
anchor build  # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç target/idl/tamagotchi.json
```

–ó–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `@coral-xyz/anchor` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏:
```javascript
import { Program } from '@coral-xyz/anchor';
const pet = program.account.pet.fetch(petPda);
```

–≠—Ç–æ –∏—Å–∫–ª—é—á–∏—Ç –æ—à–∏–±–∫–∏ —Ä—É—á–Ω–æ–π –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏!

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù–û**  
**–î–∞—Ç–∞:** 2025-10-02  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–∏—Ç–æ–º–µ—Ü —Å–æ–∑–¥–∞–≤–∞–ª—Å—è "–º–µ—Ä—Ç–≤—ã–º" –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏  
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –ø–æ–ª—è –∏ –ø–æ—Ä—è–¥–æ–∫ —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–∏—Ç–æ–º–µ—Ü —Ç–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–µ—Ç—Å—è –∂–∏–≤—ã–º —Å health=100, lives=3  






